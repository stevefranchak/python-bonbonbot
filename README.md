I lazily threw this together so that I can get something up and running. I'll try to revisit this to improve on it.
